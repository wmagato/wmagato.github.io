<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>30 Day Plank Challenge</title>
    <meta name="author" content="@wmagato">

    <style type="text/css">h2 { font-family: sans-serif; }</style>
    <link href="/plank/assets/css/nv.d3.css" rel="stylesheet">
    <script src="/plank/assets/lib/d3.js"></script>
    <script src="/plank/assets/js/nv.d3.js"></script>

    <style type="text/css">h2 { font-family: sans-serif; }</style>
    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, #chart1, svg {
            margin: 5px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
        .dashed {
            stroke-dasharray: 5,5;
        }
    </style>
  <head>

  <body class='with-3d-shadow with-transitions'>
    <div><h2 align="center" >30 Day Plank Challenge</h2></div>
    <div id="chart1"></div>

    <script>
      // Wrapping in nv.addGraph allows for '0 timeout render', stores rendered charts in nv.graphs, and may do more in the future... it's NOT required
      var chart;
      var data;

      nv.addGraph(function() {
        chart = nv.models.lineChart()
            .options({
                duration: 300,
                useInteractiveGuideline: true
            })
        ;
        // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the parent chart, so need to chain separately
        chart.xAxis
//            .axisLabel("Day")
            .staggerLabels(true)
        ;
        chart.yAxis
            .axisLabel('Time')
            .tickFormat(function(d) {
                return d3.time.format("%M:%S")(d)})
        ;

//        chart.forceY([0, 300]);

        data = plankTimes();

        d3.select('#chart1').append('svg')
            .datum(data)
            .call(chart);
        nv.utils.windowResize(chart.update);
        return chart;
      });

      function time(min, sec) {
        return new Date(0, 0, 0, 0, min, sec, 0);
      }

      function plankTimes() {
        return [
          {
            key: "Nicki",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(0, 23) },
            ]
          },
          {
            key: "Bill",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(1, 23) },
            ]
          },
          {
            key: "Jill",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(1, 13) },
            ]
          },
          {
            key: "Peter",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(2, 0) },
            ]
          },
          {
            key: "Sarah",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(1, 45) },
            ]
          },
          {
            key: "Paige",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(1, 6) },
            ]
          },
          {
            key: "Addison",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(1, 7) },
            ]
          },
          {
            key: "Angela",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: time(0, 40) },
            ]
          },
          {
            area: true,
            key: "Target",
            color: '#808080',
            values: [
                { x: 0, y: time(0, 0) },
                { x: 1, y: time(0, 20) },
                { x: 2, y: time(0, 20) },
                { x: 3, y: time(0, 30) },
                { x: 4, y: time(0, 30) },
                { x: 5, y: time(0, 40) },
                { x: 5, y: time(0, 0) },
                { x: 6, y: time(0, 0) }, // rest day
                { x: 7, y: time(0, 0) },
                { x: 7, y: time(0, 45) },
                { x: 8, y: time(0, 45) },
                { x: 9, y: time(0, 60) },
                { x: 10, y: time(0, 60) },
                { x: 11, y: time(0, 60) },
                { x: 12, y: time(1, 30) },
                { x: 12, y: time(0, 0) },
                { x: 13, y: time(0, 0) }, // rest day
                { x: 14, y: time(0, 0) },
                { x: 14, y: time(1, 30) },
                { x: 15, y: time(1, 30) },
                { x: 16, y: time(2, 0) },
                { x: 17, y: time(2, 0) },
                { x: 18, y: time(2, 30) },
                { x: 18, y: time(0, 0) },
                { x: 19, y: time(0, 0) }, // rest day
                { x: 20, y: time(0, 0) },
                { x: 20, y: time(2, 30) },
                { x: 21, y: time(2, 30) },
                { x: 22, y: time(3, 0) },
                { x: 23, y: time(3, 0) },
                { x: 24, y: time(3, 30) },
                { x: 25, y: time(3, 30) },
                { x: 25, y: time(0, 0) },
                { x: 26, y: time(0, 0) }, // rest day
                { x: 27, y: time(0, 0) },
                { x: 27, y: time(4, 0) },
                { x: 28, y: time(4, 0) },
                { x: 29, y: time(4, 30) },
                { x: 30, y: time(5, 0) },
            ]
          },
        ];
      }
    </script>
  </body>
</html>
