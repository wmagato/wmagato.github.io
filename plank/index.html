<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>30 Day Plank Challenge</title>
    <meta name="author" content="@wmagato">

    <style type="text/css">h2 { font-family: sans-serif; }</style>
    <link href="/plank/assets/css/nv.d3.css" rel="stylesheet">
    <script src="/plank/assets/lib/d3.js"></script>
    <script src="/plank/assets/js/nv.d3.js"></script>

    <style type="text/css">h2 { font-family: sans-serif; }</style>
    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, #chart1, svg {
            margin: 5px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
        .dashed {
            stroke-dasharray: 5,5;
        }
    </style>
  <head>

  <body class='with-3d-shadow with-transitions'>
    <div><h2 align="center" >30 Day Plank Challenge</h2></div>
    <div id="chart1"></div>

    <script>
      // Wrapping in nv.addGraph allows for '0 timeout render', stores rendered charts in nv.graphs, and may do more in the future... it's NOT required
      var chart;
      var data;

      nv.addGraph(function() {
        chart = nv.models.lineChart()
            .options({
                duration: 300,
                useInteractiveGuideline: true
            })
        ;
        // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the parent chart, so need to chain separately
        chart.xAxis
            .staggerLabels(true)
        ;
        chart.yAxis
            .axisLabel('Time')
            .tickFormat(function(d) {
                return d3.time.format("%M:%S")(new Date(d))})
        ;

        chart.forceY([0, 300]);

        d3.select('#chart1').append('svg')
            .datum(plankData())
            .call(chart);

        nv.utils.windowResize(chart.update);
        return chart;
      });

        function plankTime(min, sec) {
            return ((min * 60000) + (sec * 1000));
        }

      function plankData() {
        return [
          {
            key: "Nicki",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: plankTime(0, 23) },
            ]
          },
          {
            key: "Bill",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 83000 },
            ]
          },
          {
            key: "Jill",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 73000 },
            ]
          },
          {
            key: "Peter",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 120000 },
            ]
          },
          {
            key: "Sarah",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 105000 },
            ]
          },
          {
            key: "Paige",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 66000 },
            ]
          },
          {
            key: "Addison",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 67000 },
            ]
          },
          {
            key: "Angela",
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 40000 },
            ]
          },
          {
            area: true,
            key: "Target",
            color: '#808080',
            values: [
                { x: 0, y: 0 },
                { x: 1, y: 20000 },
                { x: 2, y: 20000 },
                { x: 3, y: 30000 },
                { x: 4, y: 30000 },
                { x: 5, y: 40000 },
                { x: 5, y: 0 },
                { x: 6, y: 0 }, // rest day
                { x: 7, y: 0 },
                { x: 7, y: 45000 },
                { x: 8, y: 45000 },
                { x: 9, y: 60000 },
                { x: 10, y: 60000 },
                { x: 11, y: 60000 },
                { x: 12, y: 90000 },
                { x: 12, y: 0 },
                { x: 13, y: 0 }, // rest day
                { x: 14, y: 0 },
                { x: 14, y: 90000 },
                { x: 15, y: 90000 },
                { x: 16, y: 120000 },
                { x: 17, y: 120000 },
                { x: 18, y: 150000 },
                { x: 18, y: 0 },
                { x: 19, y: 0 }, // rest day
                { x: 20, y: 0 },
                { x: 20, y: 150000 },
                { x: 21, y: 150000 },
                { x: 22, y: 180000 },
                { x: 23, y: 180000 },
                { x: 24, y: 210000 },
                { x: 25, y: 210000 },
                { x: 25, y: 0 },
                { x: 26, y: 0 }, // rest day
                { x: 27, y: 0 },
                { x: 27, y: 240000 },
                { x: 28, y: 240000 },
                { x: 29, y: 270000 },
                { x: 30, y: 300000 },
            ]
          },
        ];
      }
    </script>
  </body>
</html>
